## 📈 점수/계산 시스템

라운드 점수와 총점의 이중 구조, 계산 순서, 상호작용 규칙을 정의합니다.

### 점수 구조

- 라운드 점수: 라운드마다 초기화되는 임시 점수
- 총점: 게임 전체 누적 점수(승부 결정 기준), 최솟값 1 보장

### 계산 순서(불변)

1. 기본 주사위 점수(성공/실패 규칙 포함)
2. 성향 보너스(공격 6=+3, 방어 성공=방어막 +1, 밸런스=E+1/G+1)
3. 특수 주사위 효과(⚡/🔥/🎯/🛡️/⭐)
4. 전략 카드 효과(부스트 ×2, 공격/스틸/리셋 등)
5. 방어막 판정(차단 가능 효과 차단)
6. 이벤트 효과(즉시/지연 적용)
7. 최종 합산(라운드 → 총점)

### 상호작용 규칙

- 곱셈: 🎯더블 × 부스트(×2×2=×4), 순차 적용
- 감점 누적: ⚡공격(-2) + 공격카드(-3) = -5 (단순 합산)
- 방어막: 공격/⚡/🔥(이번 라운드 -3)/🦹만 차단
- 최솟값 보장: 라운드 점수 0, 총점 1(💥 예외: 총점 ÷2, 최소 3 보장)

### 동점 처리

1. 마지막 라운드 점수 → 2) 에너지 보유량 → 3) 소유 카드 수 → 4) 무승부

### 구현 메모

- 단계별 결과를 로그로 남기고, UI는 증가/감소/차단 애니메이션으로 피드백
- 리셋 카드 vs 리셋 이벤트: 카드가 우선(이벤트 무효화)

### 구현 가이드 (순수 JS)

- 파일: `src/systems/scoring.js`
- 인터페이스
  - `computeRoundScore(state, context) => { state, roundScore }`
  - 내부 순서: 기본 → 보너스 → 특수주사위 → 카드 → 방어막 → 이벤트 → 합산
- 예시(순서 파이프)

```js
// src/systems/scoring.js
export function computeRoundScore(state, ctx) {
  let s = state;
  s = applyBase(s, ctx); // 1
  s = applyBonuses(s, ctx); // 2
  s = applySpecialDice(s, ctx); //3
  s = applyCards(s, ctx); // 4
  s = applyShields(s, ctx); // 5
  s = applyEvents(s, ctx); // 6
  return finalize(s); // 7
}
```
