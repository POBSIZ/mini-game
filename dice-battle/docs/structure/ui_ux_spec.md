## 🎨 Dice Battle UI/UX 스펙

본 문서는 `structure/` 문서군(아키텍처/플로우/도메인/시스템) 기반으로 실제 플레이 경험을 최적화하기 위한 UI/UX 지침을 정의합니다. 구현은 순수 JS + DOM/CSS 기준을 가정합니다.

---

### 1) 정보 설계(Information Architecture)

- **전역 레이아웃**: 상단 헤더(라운드/총점), 중앙 보드(성향/주사위/라운드 점수), 좌우 패널(플레이어/AI 상태), 하단 패널(카드/이벤트/로그/액션).
- **가시성 원칙**:
  - 공개 정보(총점, 에너지, 방어막, 라운드, 주사위, 사용 카드수)는 항상 노출.
  - 부분 정보(카드 보유 수, 게이지)는 아이콘/게이지 바 형태로 수치 비노출 가능(디자인 옵션).
  - 숨김 정보(카드 종류, 다음 턴 성향)는 툴팁/로그로도 노출 금지.
- **상태 구역**:
  - `헤더`: Round x/y, 플레이어 총점/AI 총점, 진행 단계 배지(`PreCard`, `Roll`, ...).
  - `중앙`: 성향 선택 UI → 주사위 결과 → 라운드 점수 애니메이션.
  - `좌/우`: Player/AI 패널(에너지/방어막/게이지/카드수/이벤트 예약 아이콘).
  - `하단`: 카드 인벤토리(사용 가능만 활성), 이벤트 드로우/적용 피드, 액션 버튼(확정/다음 단계).

---

### 2) 라운드 플로우별 UI

- **PreRound**
  - 성향 토글(공격/방어/밸런스). 선택 시 설명 툴팁: 성공 조건/보너스.
  - 사전 카드 영역 활성(방어/부스트만). 미충족(에너지/제한) 시 비활성 + 이유 툴팁.
  - 확정 버튼: 성향 고정 후 다음 단계 이동.
- **Roll**
  - 주사위 컴포넌트: 클릭/버튼으로 굴리기. 결과값 팝 애니메이션.
  - 특수 주사위 발생 시 배지(⚡/🔥/🎯/🛡️/⭐)와 미니 설명 토스트.
- **PostCard**
  - 사후 카드만 활성(공격/스틸/리셋). 라운드당 2장, 같은 종류 1장 제약을 버튼 배지로 가시화.
- **Score**
  - 계산 단계 파이프를 순차 하이라이트: 기본 → 보너스 → 특수 → 카드 → 방어막 → 이벤트 → 합산.
  - 증감/배가/차단 각각의 애니메이션 유형 구분.
- **ShieldCheck**
  - 차단 시 해당 효과 위에 회색 X 애니메이션, 방어막 카운트 1 감소 스케일 다운.
- **Event**
  - 드로우 카드 플립 애니메이션. 즉시/지연 배지로 구분. 지연은 상단 예약 아이콘(🍀/🌙/🎲)에 뱃지 카운트/하이라이트.
- **Accumulate**
  - 라운드 점수 → 총점 이행 바 애니메이션. 게이지/연승·연패/카드 지급 발생 시 동시 토스트.

---

### 3) 핵심 컴포넌트 스펙

- **성향 선택(TendencyToggle)**
  - 옵션: `attack`, `defense`, `balance`.
  - 각 옵션에 미니 카드: 성공/실패/보너스 요약. 선택 시 강조 테두리.
- **주사위(DiceRoller)**
  - 시드 재현성 디버그 모드: 입력창 표시(옵션). 일반 모드에서는 숨김.
  - 결과가 6(공격) 또는 2(방어)일 때 특수 이펙트 등장.
- **카드(Hand & CardButton)**
  - 카드 타입별 색/아이콘: 공격(⚔️ red), 방어(🛡️ blue), 부스트(⚡ yellow), 스틸(🦹 purple), 리셋(🧹 gray).
  - 툴팁에 비용/시점/효과/차단 가능 여부 명시.
  - 비활성 사유 배지: `E부족`, `시점제약`, `중복종류`, `2장제한`.
- **방어막(ShieldBadge)**
  - 0~2 아이콘. 생성/소모 순간 펄스/스케일 애니메이션.
- **에너지(EnergyGauge)**
  - 0~10 바. 획득/소모 시 좌우 방향 애니메이션. 상한 보정 토스트.
- **게이지(CardGauge)**
  - 0~5 링 게이지. 5 도달 시 카드 +1 연출(덱에서 손으로 이동). 초과 이월은 링 넘침 효과.
- **이벤트(EventFeed & ReservationTray)**
  - 즉시 이벤트는 피드에 타임라인 카드로 기록(아이콘/효과/결과 수치).
  - 지연 이벤트는 상단 Tray에 고정 아이콘으로 예약 상태 시각화.
- **스코어(ScorePanel)**
  - 라운드/총점 분리. 최솟값 보장(총점 1) 안내는 규칙 도움말에만 표기.
- **로그(LogTimeline)**
  - 도메인 이벤트 시퀀스 표시. 개발자 모드에서 원시 이벤트 키/페이로드 노출 토글.

---

### 4) 피드백/애니메이션 규칙

- **증가(+)**: 초록 상승 수치, 카운트업.
- **감소(-)**: 붉은 하강 수치, 셰이크.
- **배가(x2/x4)**: 카드 또는 🎯와 함께 확대 스케일.
- **차단(block)**: 회색 X 오버레이 + 방패 스파크.
- **예약(schedule)**: 상단 Tray 아이콘에 빛남 효과.
- **무효화(reset)**: 장면 디소브 + 값 초기화.

---

### 5) 제약/가드의 UI 반영

- 라운드당 카드 2장/동종 1장: 사용 카운터 배지와 동일 타입 버튼 자동 잠금.
- 에너지 상한 10: 초과 획득 시 상한 보정 토스트(`최대치 도달`).
- 방어막 2 상한: 추가 생성 시 진동 + 툴팁(`최대 2개`).
- 차단 범위: 차단 불가 효과(🎯/⭐/지연 등)에는 `차단 불가` 라벨을 사전 툴팁에 표시.

---

### 6) 접근성/반응형

- 키보드 내비게이션: 탭 순서는 `성향 → 사전카드 → 확정 → 주사위 → 사후카드 → 다음`.
- 라이브 리전: 점수/에너지/방어막/게이지 변화에 ARIA live.
- 모바일(≤768px): 좌/우 패널을 상단/하단으로 스택, 카드 영역은 가로 스크롤.

---

### 7) 오류/가드 피드백 패턴

- 규칙 위반 시 즉시 피드백: 버튼 셰이크 + 툴팁 사유 노출. 콘솔 오류는 개발 모드에서만.
- 시스템 오류(예: RNG 미초기화) 시 중앙 모달로 재시도/새로고침 제공.

---

### 8) 색/아이콘 가이드(권장)

- 색상: 공격 #F44336, 방어 #2196F3, 부스트 #FFC107, 스틸 #9C27B0, 리셋 #9E9E9E.
- 점수 +#4CAF50 / -#E53935, 차단 #9E9E9E, 예약 #00BCD4.
- 아이콘은 시스템 문서의 이모지 기호와 일관 유지.

---

### 9) 개발 연동 가이드

- 이벤트버스 연동: `phase:*`, `card:*`, `shield:*`, `event:*`, `score:*`를 구독하여 UI 업데이트.
- 상태 원본은 `state.players`, `state.round`, `state.scheduled`를 단방향 바인딩. UI 조작은 엔진 액션으로만.
- 디버그 HUD(옵션): RNG 시드, 상태 스냅샷 보기, 로그 원시 보기 토글.

---

### 10) 완료 기준(DoD)

- 플로우 전 단계에서 사용 불가 상태가 명확히 표현되고, 사용 가능 액션은 1클릭 이내 접근 가능.
- 모든 효과는 적절한 피드백(증가/감소/배가/차단/예약/무효화)으로 구분 표시.
- 모바일/데스크탑 모두 정보 과밀 없이 주요 수치가 한 화면에 가시.
